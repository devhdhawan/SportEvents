<!DOCTYPE html>
<html>
<head>
    <title>Live Sports Scores</title>
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"  crossorigin="anonymous"></script>
</head>
<body>
    <h1>Live Sports Scores</h1>
    <div id="scores"></div>

    <script>
        // Connect to WebSocket server
        const socket = io("http://localhost:5000");

        socket.on('connect', () => {
            console.log('Connected to WebSocket server');
        });

        socket.on('disconnect', () => {
            console.log('Disconnected from WebSocket server');
        });

        // Listen for score update events
        socket.on('score_update', (data) => {
            console.log('Received live score update:', data);

            const scoresDiv = document.getElementById('scores');

            // Format the score display as per your event data
            const matchId = data.match_id || "Unknown";
            const battingTeam = data.batting_team || data.team_a || "N/A";
            const bowlingTeam = data.bowling_team || data.team_b || "N/A";
            const score = data.score || `${data.score_a || 0}-${data.wickets_a || 0}`;
            const wickets = data.wickets || data.wickets_a || 0;
            const overs = data.overs || 0;
            const balls = data.balls % 6 || 0;

            // Create or update a div element for each match
            let matchDiv = document.getElementById(matchId);
            if (!matchDiv) {
                matchDiv = document.createElement('div');
                matchDiv.id = matchId;
                scoresDiv.appendChild(matchDiv);
            }

            matchDiv.innerHTML = `
                <h3>Match: ${matchId}</h3>
                <p>Batting: ${battingTeam}</p>
                <p>Bowling: ${bowlingTeam}</p>
                <p>Score: ${score} / Wickets: ${wickets}</p>
                <p>Overs: ${overs}.${balls}</p>
                <hr>
            `;
        });
    </script>
</body>
</html>
